{
    "contexts": [
        {
            "name": "Billing",
            "modules": [
                {
                    "name": "Invoice",
                    "description": "Handles invoice creation, retrieval, and billing operations.",
                    "commands": [
                        {
                            "name": "CreateInvoice",
                            "class": "App\\Billing\\Invoice\\Application\\Create\\CreateInvoice",
                            "description": "Creates a new invoice for a customer.",
                            "input": [
                                {
                                    "name": "customerId",
                                    "type": "InvoiceCustomerId",
                                    "class": "App\\Billing\\Invoice\\Domain\\Model\\InvoiceCustomerId",
                                    "description": "The customer who will own the invoice."
                                },
                                {
                                    "name": "amount",
                                    "type": "int",
                                    "description": "The invoice amount in cents."
                                },
                                {
                                    "name": "currency",
                                    "type": "string",
                                    "description": "The currency code (e.g., USD, EUR)."
                                }
                            ],
                            "output": {
                                "type": "InvoiceId",
                                "class": "App\\Billing\\Invoice\\Domain\\Model\\InvoiceId"
                            }
                        }
                    ],
                    "queries": [
                        {
                            "name": "FindInvoice",
                            "class": "App\\Billing\\Invoice\\Application\\Find\\FindInvoice",
                            "description": "Retrieves an invoice by its identifier.",
                            "input": [
                                {
                                    "name": "id",
                                    "type": "InvoiceId",
                                    "class": "App\\Billing\\Invoice\\Domain\\Model\\InvoiceId",
                                    "description": "The unique identifier of the invoice."
                                }
                            ],
                            "output": {
                                "type": "Invoice",
                                "class": "App\\Billing\\Invoice\\Domain\\Model\\Invoice"
                            }
                        }
                    ],
                    "domainEvents": [
                        {
                            "name": "InvoiceCreated",
                            "class": "App\\Billing\\Invoice\\Domain\\Event\\InvoiceCreated",
                            "description": "Emitted when a new invoice is created.",
                            "properties": [
                                {
                                    "name": "id",
                                    "type": "string",
                                    "description": "Unique identifier for this event instance (autogenerated)."
                                },
                                {
                                    "name": "aggregateId",
                                    "type": "string",
                                    "description": "Identifier of the aggregate that produced this event."
                                },
                                {
                                    "name": "occurredOn",
                                    "type": "DateTimeImmutable",
                                    "description": "Timestamp when this event occurred (autogenerated)."
                                },
                                {
                                    "name": "invoiceId",
                                    "type": "string",
                                    "description": "The unique identifier of the invoice."
                                },
                                {
                                    "name": "customerId",
                                    "type": "string",
                                    "description": "The customer who owns the invoice."
                                },
                                {
                                    "name": "amount",
                                    "type": "float",
                                    "description": "The total amount of the invoice."
                                }
                            ]
                        }
                    ],
                    "eventSubscribers": [
                        {
                            "name": "SendInvoiceEmailOnCreated",
                            "class": "App\\Billing\\Invoice\\Infrastructure\\SendInvoiceEmailOnCreated",
                            "description": "Sends an email notification when an invoice is created.",
                            "event": "InvoiceCreated",
                            "eventClass": "App\\Billing\\Invoice\\Domain\\Event\\InvoiceCreated"
                        }
                    ],
                    "externalCalls": [
                        {
                            "type": "query",
                            "source": "CreateInvoiceProcessor",
                            "sourceClass": "App\\Billing\\Invoice\\Presentation\\Api\\Invoice\\Create\\CreateInvoiceProcessor",
                            "name": "FindCustomer",
                            "targetClass": "App\\Identity\\Customer\\Application\\Find\\FindCustomer",
                            "targetContext": "Identity",
                            "targetModule": "Customer"
                        }
                    ]
                }
            ]
        },
        {
            "name": "Identity",
            "modules": [
                {
                    "name": "Customer",
                    "description": "Manages customer identity and profile information.",
                    "queries": [
                        {
                            "name": "FindCustomer",
                            "class": "App\\Identity\\Customer\\Application\\Find\\FindCustomer",
                            "description": "Retrieves a customer by their identifier.",
                            "input": [
                                {
                                    "name": "id",
                                    "type": "CustomerId",
                                    "class": "App\\Identity\\Customer\\Domain\\Model\\CustomerId",
                                    "description": "The unique identifier of the customer."
                                }
                            ],
                            "output": {
                                "type": "Customer",
                                "class": "App\\Identity\\Customer\\Domain\\Model\\Customer"
                            }
                        }
                    ]
                }
            ]
        }
    ],
    "meta": {
        "generatedAt": "2024-01-15T10:30:00+00:00",
        "project": "test-project"
    }
}
